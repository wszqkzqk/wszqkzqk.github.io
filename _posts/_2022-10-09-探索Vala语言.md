---
layout:     post
title:      探索Vala语言
subtitle:   Vala语言学习心得
date:       2022-??-??
author:     星外之神
header-img: img/Vala_Logo.webp
catalog:    true
tags:       GTK Vala
---

## 简介

Vala语言是一门专门为GObject设计的编程语言，语法类似于C#。Vala并没有自己的运行时，而是依靠在编译时由Vala编译器将Vala源代码转化为C源代码来实现lambda、class等各种高级功能，通常来说，基础的Vala程序的依赖仅有GLib和系统的C语言库，十分小巧精炼。Vala具有自动的内存管理功能，它在编译时进行引用计数，生成的C代码与手动管理内存的C代码结构上类似，避免了引入GC或进行运行时引用计数检查对程序效率的额外开销。因此，Vala同时拥有C#的高开发效率与C的高效低内存占用。

此外，Vala语言与C#语言一样，还具有跨平台的特性。Vala背靠完备的基础库GLib、强大的图形库GTK，以及各种各样的语言绑定，既能用来开发高效率运行的CLI应用，又能用来开发功能丰富的GTK应用，适用场景较广。

## 代码风格

## 优势

## 不足

自Vala语言于2006年推出到现在，这一语言始终没有能够发布正式版。此外，该语言虽然开发高效，使用便捷，但是使用人数与开发人数都远远小于主流大众语言。因此，尤其是在一些不太常用的地方，Vala可能会存在一定的编译器Bug。而这些编译器Bug在开发过程中往往难以定位，降低开发效率。Vala语言主要是为了GObject开发，而GObject在Linux下的应用远远多于在Windows下的应用，因此Vala对Windows平台下的开发体验可能顾及较少。

笔者在这里对自己在学习Vala过程中遇到的编译器Bug（或反人类之处、不合理之处）予以列举。

### 反斜杠灾难：Windows下的编译器Bug

***笔者已向上游提交补丁，该Bug于`0.56.3`修复***

### 头文件包含问题：GType的使用与GLib的包含

### 容器中对象的运算符问题：`a[i]+=1`、`a[i]=a[i]+1`与`a[i]++`的坑

### 其他问题：产生的C代码的效率问题

## 发展

Vala仍在在积极的发展中，不断有新功能引入。

## 示例
